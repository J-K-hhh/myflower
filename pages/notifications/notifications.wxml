<view class="container">
  <view class="header">
    <view class="tabs">
      <text class="tab {{tab==='unread'?'active':''}}" data-tab="unread" bindtap="switchTab">æœªè¯»</text>
      <text class="tab {{tab==='all'?'active':''}}" data-tab="all" bindtap="switchTab">å…¨éƒ¨</text>
    </view>
    <button class="mark-btn" size="mini" bindtap="markAllRead" wx:if="{{tab==='unread' && items.length>0}}">æ ‡è®°å…¨éƒ¨å·²è¯»</button>
  </view>

  <view class="list">
    <block wx:for="{{items}}" wx:key="_id">
      <view class="item" data-id="{{item._id}}" bindtap="openItem">
        <view class="line1">
          <text class="type">{{ item.type==='like' ? 'èµ' : (item.type==='comment' ? 'è¯„è®º' : 'é€šçŸ¥') }}</text>
          <text class="time">{{item.timeText}}</text>
        </view>
        <view class="line2">
          <text class="actor">{{item.actorNickname || 'æœ‹å‹'}}</text>
          <text class="content">{{ item.type==='comment' ? ('ï¼š'+(item.content||'')) : '' }}</text>
        </view>
        <view class="line3" wx:if="{{item.plantName}}">
          <text class="plant">ğŸŒ¿ {{item.plantName}}</text>
        </view>
      </view>
    </block>
    <view class="empty" wx:if="{{items.length===0}}">æš‚æ— é€šçŸ¥</view>
  </view>

  <view class="footer" wx:if="{{hasMore}}">
    <button size="mini" bindtap="loadMore">åŠ è½½æ›´å¤š</button>
  </view>
</view>
