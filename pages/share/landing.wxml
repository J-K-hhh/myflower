<view class="share-container">
  <!-- é¡¶éƒ¨ä¿¡æ¯ -->
  <view class="header">
    <view class="title-line">
      <text class="plant-name">{{plant.aiResult.name || i18nCommon.unknownPlant}}</text>
      <text class="owner">Â· by {{ownerName || 'å¾®ä¿¡å¥½å‹'}}</text>
    </view>
    <view class="sub-line">
      <text class="share-time" wx:if="{{plant.createTime}}">{{createdAtText}}</text>
    </view>
  </view>

  <!-- å›¾é›†å¤§å¡ -->
  <view class="hero">
    <swiper class="gallery" style="height: {{currentHeight}}px" indicator-dots="{{galleryImages.length > 1}}" circular="true" bindchange="onGalleryChange">
      <block wx:for="{{galleryImages}}" wx:key="*this">
        <swiper-item>
          <image class="hero-image" src="{{item}}" mode="aspectFit" bindload="onImageLoad" data-index="{{index}}"></image>
        </swiper-item>
      </block>
    </swiper>
    <view class="quick-actions">
      <button class="qa-btn" size="mini" bindtap="toggleFollow">{{isFollowed ? i18n.follow.followed : i18n.follow.followToHome}}</button>
      <button class="qa-btn" size="mini" bindtap="like">â™¡ {{likeCount}}</button>
      <button class="qa-btn" size="mini" open-type="share">â†—</button>
    </view>
    <!-- è¦†ç›–å±‚ï¼šå½“å‰å›¾ç‰‡çš„å¤‡å¿˜ä¸è¯„è®º -->
    <view class="overlay">
      <view class="memo-on-image" wx:if="{{currentMemo}}">ğŸ“ {{currentMemo}}</view>
      <view class="comments-on-image" wx:if="{{commentsToShow.length > 0}}">
        <block wx:for="{{commentsToShow}}" wx:key="id">
          <view class="comment-line">{{item.nickname}}ï¼š{{item.content}}</view>
        </block>
      </view>
    </view>
  </view>

  <!-- æœ€æ–°çŠ¶æ€æ¡ -->
  <view class="activity-strip" wx:if="{{latestStatusText}}">
    <text class="clock">â±</text>
    <text class="status-text">{{latestStatusText}}</text>
  </view>

  <!-- ä¸‹æ–¹è¾“å…¥åŒºä¿æŒä¸å˜ï¼Œå†…å®¹å·²è¦†ç›–æ˜¾ç¤ºåœ¨å›¾ç‰‡ä¸Š -->

  <!-- äº’åŠ¨åŒºï¼šè¯„è®º -->
  <view class="comment-section" wx:if="{{allowComment}}">
    <view class="comment-header">
      <text>ğŸ’¬</text>
      <text class="comment-count">{{comments.length}}</text>
    </view>
    <view class="comment-list">
      <block wx:for="{{comments}}" wx:key="id">
        <view class="comment-item">
          <text class="nick">{{item.nickname}}</text>
          <text class="content">ï¼š{{item.content}}</text>
          <text class="time">{{item.timeText}}</text>
        </view>
      </block>
    </view>
    <view class="comment-input">
      <input placeholder="{{i18n.comment.placeholder}}" value="{{commentDraft}}" bindinput="onCommentInput" confirm-type="send" bindconfirm="submitComment"/>
      <button class="send" size="mini" bindtap="submitComment">{{i18n.comment.send}}</button>
    </view>
  </view>

  <!-- å·¥å…·åŒº -->
  <view class="tools">
    <button class="primary" bindtap="toggleFollow">{{isFollowed ? i18n.follow.followed : i18n.follow.followToHome}}</button>
    <button class="secondary" bindtap="toggleNotify">{{notifyOnUpdate ? i18n.follow.notifyOn : i18n.follow.notifyOff}}</button>
  </view>

  <!-- å†å²è®°å½•ï¼ˆç®€ç‰ˆï¼‰ -->
  <view class="history-strip" wx:if="{{historyItems.length > 0}}">
    <scroll-view scroll-x="true" class="history-scroll">
      <view class="history-items">
        <block wx:for="{{historyItems}}" wx:key="time">
          <view class="history-item">{{item.text}}</view>
        </block>
      </view>
    </scroll-view>
  </view>

  <!-- åº•éƒ¨è¿›å…¥è¯¦æƒ… -->
  <view class="enter-detail">
    <button open-type="navigate" bindtap="goToDetail">{{i18n.enterDetail}}</button>
  </view>

  <!-- å›åˆ°æˆ‘çš„ä¸»é¡µ -->
  <view class="enter-home">
    <button bindtap="goHome">å›åˆ°æˆ‘çš„ä¸»é¡µ</button>
  </view>
</view>
