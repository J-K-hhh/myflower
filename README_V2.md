# 我的阳台花园 - 项目版本管理

## 版本历史

### V0.1 - 基础功能 (09/14)
- ✅ **状态**: 已上线
- **功能**: 基础植物管理功能
- **说明**: 项目初始版本，包含基本的植物添加、浇水、施肥记录功能

### V0.2 - 模型管理功能 (09/14)
- ✅ **状态**: 开发完成
- **功能**: 替换百度识花为千问多模态模型
- **说明**: 千问又贵又垃圾，完全不能用
- **技术实现**:
  - 新增设置页面，支持模型选择
  - 支持百度AI植物识别和通义千问VL两种模型
  - 可测试模型连接状态
  - 集成qwen-vl-max多模态大模型
  - 提供更详细的植物识别和养护建议
  - 支持地理位置信息，提供个性化养护建议

### V0.3 - 功能加强 (已完成)
- ✅ **状态**: 已上线
- **功能**: 批量操作和图片管理增强
- **实现功能**:
  1. **批量浇水**: 支持一次性为多株植物浇水
  2. **批量施肥**: 支持一次性为多株植物施肥
  3. **图片信息展示**: 显示拍摄日期和备忘信息
  4. **图片顺序管理**: 支持更改图片显示顺序
  5. **批量操作历史**: 记录和查看批量操作历史
  6. **用户体验优化**: 操作确认、进度提示、错误处理

## 当前版本功能详情

### 模型管理功能
- 新增设置页面，支持模型选择
- 支持百度AI植物识别和通义千问VL两种模型
- 可测试模型连接状态

### 通义千问VL模型集成
- 集成qwen-vl-max多模态大模型
- 提供更详细的植物识别和养护建议
- 支持地理位置信息，提供个性化养护建议
- 包含以下信息：
  - 植物名称和学名
  - 浇水tips
  - 光照tips
  - 健康状态分析
  - 综合养护建议
  - 有趣的小知识

### 健康分析功能
- 使用qwen-vl模型分析植物健康状态
- 拍照时自动进行健康分析
- 保存健康分析历史记录
- 可查看历史健康分析结果

### 存储限制管理
- 可设置每株植物最多保存的照片数量
- 可设置浇水/施肥记录的最大条数
- 自动清理超出限制的旧记录

### 位置服务
- 支持获取用户地理位置
- 结合位置信息提供更准确的养护建议
- 位置权限管理

## 技术实现

### 新增文件
- `pages/settings/` - 设置页面
- `utils/model_utils.js` - 模型管理工具类

### 主要功能
1. **模型切换**: 在设置中选择使用百度AI或通义千问VL
2. **智能识别**: 根据选择的模型进行植物识别
3. **健康分析**: 使用qwen-vl模型分析植物健康状态
4. **存储管理**: 自动管理照片和记录数量
5. **位置服务**: 获取地理位置提供个性化建议

### API配置
- 百度AI: 使用原有配置
- 通义千问VL: API Key: sk-768522cdd6d741b68972ed9a9cc36e60

## V0.3 功能详情

### 批量操作功能
- **批量浇水**: 支持多选植物进行批量浇水操作，自动更新浇水记录
- **批量施肥**: 支持多选植物进行批量施肥操作，自动更新施肥记录
- **批量模式**: 点击批量模式按钮进入多选状态，支持选择多株植物
- **操作历史**: 记录批量操作的时间、植物列表和操作类型

### 图片管理增强
- **拍摄日期显示**: 在图片上显示拍摄日期，自动记录拍照时间
- **备忘信息**: 支持为每张图片添加备忘信息，点击可编辑
- **图片排序**: 支持上下移动按钮调整图片显示顺序
- **图片信息**: 每张图片包含路径、时间戳、日期和备忘信息

### 用户体验优化
- **操作确认**: 批量操作前显示确认对话框，避免误操作
- **进度提示**: 批量操作时显示加载动画和进度提示
- **错误处理**: 完善的错误提示和边界情况处理
- **批量历史**: 可查看历史批量操作记录，包含操作时间和植物列表

## 使用方法

### 基础功能 (V0.1-V0.2)
1. 进入设置页面选择模型
2. 开启位置服务（可选）
3. 设置存储限制
4. 添加植物时选择照片，系统会根据选择的模型进行识别
5. 在详情页面拍照时，如果使用qwen-vl模型会自动进行健康分析
6. 查看健康分析历史记录

### V0.3 新功能使用方法
1. **批量操作**:
   - 点击首页左下角的批量模式按钮（📋）
   - 选择要操作的植物（会显示选择框）
   - 点击底部的批量浇水或批量施肥按钮
   - 确认操作后等待完成
   
2. **图片管理**:
   - 在植物详情页面，图片上会显示拍摄日期
   - 点击"添加备忘"或现有备忘可以编辑备忘信息
   - 使用图片左上角的上下箭头按钮调整图片顺序
   - 点击图片右上角的操作按钮可以设为题图或删除
   
3. **批量历史**:
   - 点击首页右下角的批量历史按钮（📋）查看历史记录
   - 可以查看每次批量操作的时间、植物列表和操作类型

## 注意事项

1. 通义千问VL需要网络连接
2. 位置服务需要用户授权
3. 存储限制设置会影响现有数据
4. 健康分析功能仅在qwen-vl模型下可用
5. V0.3功能已全部实现并上线
6. 批量操作会同时更新所有选中植物的记录
7. 图片备忘信息最多支持100个字符
8. 批量操作历史最多保存50条记录
